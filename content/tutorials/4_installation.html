---
extends: skeleton/_base.html
title: TROIA Server
---

{% block content %}

{% restructuredtext %}

Before setting up Troia you have to configure environment on target computer
so it can prepare and run this service. You have to download the following software:
 
* java - http://www.oracle.com/technetwork/java/javase/downloads/index.html
* tomcat - http://tomcat.apache.org/
* mysql - http://www.mysql.com/

.. raw:: html

    <a class="btn btn-info" href="/media/downloads/troia-server-{{ app_version }}.war">
        <i class="icon-download icon-white"></i>
        Download precompiled WAR file
    </a><p></p>
 
If you want to compile Troia from source you will need:

* git - http://git-scm.com
* maven - http://maven.apache.org/

Note that if you have package manager, like Synaptic, you can simply download all this software with it.
If you are going to use package manager remember to download *tomcat6-admin* package as well.
As for servlet container you can use different one but this tutorial will be written with Tomcat in mind. 

Setting up Tomcat
-----------------

You can find detailed documentation on installing tomcat `here <http://tomcat.apache.org/tomcat-6.0-doc/setup.html>:`

In order to be able to use Tomcat's administrative functions, you must create an user with administrator privileges.
You can do that by modifying *tomcat-users.xml* file. 

* if you are using Linux, the file is probably located at */etc/tomcat6/tomcat-users.xml* path
* on Windows, the file can be found at the location *<CATALINA_HOME>/conf/tomcat-users.xml*

To create an user with full required privileges you must add the following line into this file

::

    <user username="administrator" password="drowssap" roles="admin,manager-gui" />

This will create user *administrator* with password *drowssap* and all privileges needed for this project.
 
Deploying WAR
-------------

To deploy the .war file, open Tomcat web application manager. If you are setting up Troia on the localhost and
Tomcat runs on port 8080, web application manager will be up at the following address:

::
 
    http://localhost:8080/manager/html

Find the part of the manager that allows you to upload and deploy .war files from disk.
After that you should simply choose .war that was generated in previous step and deploy it.
If the deployment succeeds, you will see Troia listed under Applications panel and its status will be 'Running'
To check if everything is working correctly you can punch the following into the browser's url bar:

::
  
    http://localhost:8080/troia-server-{{ app_version }}/status

As a result you should get a JSON response saying that everything is OK.


Setting up the database
-----------------------

Create the database
=====================

In order to create the database schema you have to run **Troia/troia-server/src/main/resources/troia.sql** script on the running
mysql server instance. The result of the script should be a brand new database with all the necessary tables, fields and indexes.


Set up database connection
==============================

To set up the database connection you must have to check that the information from **Troia/troia-server/src/main/resources/troia.properties**
file is correct for your deployment environment. 
Parameter meaning:

	* USER - mysql user who owns the database
	* PASSWORD - mysql user's password
	* DB - the database name (make sure that it is the same as the one from troia.sql script)
	* URL - the url of tomcat host machine (localhost if tomcat runs locally)
	* DOWNLOADS_PATH - the path for downloading the zip archive containing the computation results

**That covers all issues in regard of setting up Troia from precompiled WAR file, following part will instruct 
you how to build your own WAR file from sources downloaded from GitHub.**

Getting code
------------

Troia code is available at github under https://github.com/ipeirotis/Troia-Server address.
You have to enter directory in with you want to have Troia sources downloaded to and issue following command 

::
 
    git clone git://github.com/ipeirotis/Troia-Server.git

It will download all files from git repository into "Troia" directory so if command was issued from 
*/home/username/Documents* folder source files will end up with */home/username/Documents/Troia* as a 
project main directory.

Building WAR file
-----------------

To build WAR file you should enter project main directory execute following command 
::
 
    mvn package


As a result *target* directory will appear.
It should contain file **troia-server-{version}.war** where {version} is current Troia version.

 


{% endrestructuredtext %}

{% endblock %}

